<apex:page standardStylesheets="false" showHeader="true" sidebar="false">
<apex:stylesheet value="{ !URLFOR ($Resource.styles, 'styles.css')}" />       
<title>CQ5 Content Finder</title>
<script type="text/javascript" src="/libs/cq/ui/widgets.js"></script>
<script type="text/javascript" src="/libs/cq/security/widgets.js"></script>
<script type="text/javascript" src="/libs/cq/tagging/widgets.js"></script>

<script type="text/javascript" src="/libs/cq/ui/widgets/themes/default.js"></script>
<script type="text/javascript" src="/libs/cq/tagging/widgets/themes/default.js"></script>

        <script type="text/javascript">
            CQ.I18n.init({ "locale": "en" });

            CQ.Ext.onReady(function() {
                var debug = 0;
                var extensionString = {"tabs":[{    "tabTip": CQ.I18n.getMessage("Images"),    "id": "cfTab-Images",    "xtype": "contentfindertab",    "iconCls": "cq-cft-tab-icon images",    /*"closable": true,*/    "ranking": 10,    "items": [        CQ.wcm.ContentFinderTab.getQueryBoxConfig({            "id": "cfTab-Images-QueryBox",            /*"height": 95,*/            "items": [                CQ.wcm.ContentFinderTab.getSuggestFieldConfig({"url": "/bin/wcm/contentfinder/suggestions.json/content/dam"})                 /*                ,                {                    "xtype": "combo",                    "name": "size",                    "value": CQ.I18n.getMessage("Any format"),                    "mode": "local",                    "store": new CQ.Ext.data.SimpleStore({                        "fields": ["value", "text"],                        "data": [                            {                                "text": CQ.I18n.getMessage("Any Format"),                                "value": "image"                            },{                                "text": CQ.I18n.getMessage("Web Graphics (GIF)"),                                "value": "image/gif"                            },{                                "text": CQ.I18n.getMessage("Photographs (JPEG)"),                                "value": "image/jpeg"                            },{                                "text": CQ.I18n.getMessage("Web Images (PNG)"),                                "value": "image/png"                            }                        ]                    })                }                */            ]        }),        CQ.wcm.ContentFinderTab.getResultsBoxConfig({            "itemsDDGroups": [CQ.wcm.EditBase.DD_GROUP_ASSET],            "itemsDDNewParagraph": {                "path": "foundation/components/image",                "propertyName": "./fileReference"            },            "tbar": [                {                    "toggleGroup": "cfTab-Images-TG",                    "enableToggle": true,                    "toggleHandler": function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Images");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.THUMBS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.THUMBS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed": true,                    "allowDepress": false,                    "cls": "cq-btn-thumbs",                    "text": CQ.I18n.getMessage("Thumbs"),                    "tooltip": {                        "title": CQ.I18n.getMessage("Thumbs"),                        "text": CQ.I18n.getMessage("Switch to thumbs view"),                        "autoHide":true                    }                },                {                    "toggleGroup": "cfTab-Images-TG",                    "enableToggle": true,                    "toggleHandler": function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Images");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.DETAILS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.DETAILS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed": false,                    "allowDepress": false,                    "cls": "cq-btn-details",                    "text": CQ.I18n.getMessage("Details"),                    "tooltip": {                        "title": CQ.I18n.getMessage("Details"),                        "text": CQ.I18n.getMessage("Switch to details view"),                        "autoHide": true                    }                }            ]        },{            "url": "/bin/wcm/contentfinder/asset/view.json/content/dam"        }, {            "baseParams": {                /*"defaultMimeType": "image"*/                "mimeType": "image"            }        })    ]},{    "tabTip": CQ.I18n.getMessage("Pages"),    "id": "cfTab-Pages",    "iconCls": "cq-cft-tab-icon pages",    "xtype": "contentfindertab",    "ranking": 30,    "items": [        CQ.wcm.ContentFinderTab.getQueryBoxConfig({            "id": "cfTab-Pages-QueryBox",            "items": [                CQ.wcm.ContentFinderTab.getSuggestFieldConfig({"url": "/bin/wcm/contentfinder/suggestions.json/content"})            ]        }),        CQ.wcm.ContentFinderTab.getResultsBoxConfig({            "itemsDDGroups": [CQ.wcm.EditBase.DD_GROUP_PAGE],            "items": {                "tpl":                    '<tpl for=".">' +                        '<div class="cq-cft-search-item" ondblclick="CQ.wcm.ContentFinder.loadContentWindow(\'{path}.html\');">' +                                '<div title="{path}" class="cq-cft-search-thumb"><img src="{path}.thumb.48.48.png"/></div>' +                                '<div class="cq-cft-search-title">{title}</div>' +                                '<div class="cq-cft-search-separator"></div>' +                        '</div>' +                    '</tpl>',                "itemSelector": CQ.wcm.ContentFinderTab.DETAILS_ITEMSELECTOR            }        },{            "url": "/bin/wcm/contentfinder/page/view.json/content"        }, {            "baseParams": {                "type": "cq:Page"            }        })    ]},{    "tabTip": CQ.I18n.getMessage("Flash"),    "id": "cfTab-Flash",    "xtype": "contentfindertab",        "iconCls": "cq-cft-tab-icon flash",    "ranking": 25,    "items": [        CQ.wcm.ContentFinderTab.getQueryBoxConfig({            "id": "cfTab-Flash-QueryBox",            "items": [                CQ.wcm.ContentFinderTab.getSuggestFieldConfig({"url": "/bin/wcm/contentfinder/suggestions.json/content/dam"})            ]        }),        CQ.wcm.ContentFinderTab.getResultsBoxConfig({            "itemsDDGroups": [CQ.wcm.EditBase.DD_GROUP_ASSET],            "itemsDDNewParagraph": {                "path": "foundation/components/flash",                "propertyName": "./fileReference"            },            "tbar": [                {                    "toggleGroup": "cfTab-Flash-TG",                    "enableToggle": true,                    "toggleHandler": function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Flash");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.THUMBS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.THUMBS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed": true,                    "allowDepress": false,                    "cls": "cq-btn-thumbs",                    "text": CQ.I18n.getMessage("Thumbs"),                    "tooltip": {                        "title": CQ.I18n.getMessage("Thumbs"),                        "text": CQ.I18n.getMessage("Switch to thumbs view"),                        "autoHide":true                    }                },                {                    "toggleGroup": "cfTab-Flash-TG",                    "enableToggle": true,                    "toggleHandler": function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Flash");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.DETAILS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.DETAILS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed": false,                    "allowDepress": false,                    "cls": "cq-btn-details",                    "text": CQ.I18n.getMessage("Details"),                    "tooltip": {                        "title": CQ.I18n.getMessage("Details"),                        "text": CQ.I18n.getMessage("Switch to details view"),                        "autoHide": true                    }                }            ]        },{            "url": "/bin/wcm/contentfinder/asset/view.json/content/dam"        }, {            "baseParams": {                "mimeType": "application/x-shockwave-flash"            }        })    ]},{    "tabTip": CQ.I18n.getMessage("Documents"),    "id": "cfTab-Documents",    "xtype": "contentfindertab",    "iconCls": "cq-cft-tab-icon documents",    "ranking": 20,    "items": [        CQ.wcm.ContentFinderTab.getQueryBoxConfig({            "id": "cfTab-Documents-QueryBox",            "items": [                CQ.wcm.ContentFinderTab.getSuggestFieldConfig({"url": "/bin/wcm/contentfinder/suggestions.json/content"})            ]        }),        CQ.wcm.ContentFinderTab.getResultsBoxConfig({            "itemsDDGroups": [CQ.wcm.EditBase.DD_GROUP_ASSET],            "itemsDDNewParagraph": {                "path": "foundation/components/download",                "propertyName": "./fileReference"            },            "tbar": [                {                    "toggleGroup": "cfTab-Documents-TG",                    "enableToggle": true,                    "toggleHandler": function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Documents");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.THUMBS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.THUMBS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed": true,                    "allowDepress": false,                    "cls": "cq-btn-thumbs",                    "text": CQ.I18n.getMessage("Thumbs"),                    "tooltip": {                        "title": CQ.I18n.getMessage("Thumbs"),                        "text": CQ.I18n.getMessage("Switch to thumbs view"),                        "autoHide":true                    }                },                {                    "toggleGroup": "cfTab-Documents-TG",                    "enableToggle": true,                    "toggleHandler": function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Documents");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.DETAILS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.DETAILS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed": false,                    "allowDepress": false,                    "cls": "cq-btn-details",                    "text": CQ.I18n.getMessage("Details"),                    "tooltip": {                        "title": CQ.I18n.getMessage("Details"),                        "text": CQ.I18n.getMessage("Switch to details view"),                        "autoHide": true                    }                }            ]        }, {            "url": "/bin/wcm/contentfinder/asset/view.json/content"        }, {            "baseParams": {                "mimeType": "application/vnd.openxmlformats,application/msword,application/vnd.ms-powerpoint,application/mspowerpoint,application/powerpoint,application/x-mspowerpoint,application/x-msexcel,application/x-excel,application/excel,application/vnd.ms-excel,application/pdf"            }        })    ]},{    "id":"cfTab-Browse",    "xtype":"contentfindertab",    "tabTip":CQ.I18n.getMessage("Browse"),    "iconCls":"cq-cft-tab-icon full",    "ranking":50,    "items":[        CQ.wcm.ContentFinderTab.getBrowseTree({            "treeRoot":{                "text": CQ.I18n.getMessage("Content")            }        }, "cfTab-Browse-Tree", "cfTab-Browse-resultBox"),        CQ.wcm.ContentFinderTab.getResultsBoxConfig({            "id":"cfTab-Browse-resultBox",           "disableContinuousLoading":true,            "tbar":[                {                    "toggleGroup":"cfTab-Browse-TG",                    "enableToggle":true,                    "toggleHandler":function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Browse");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.THUMBS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.THUMBS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed":true,                    "allowDepress":false,                    "text":CQ.I18n.getMessage("Thumbs"),                    "tooltip":{                        "title":CQ.I18n.getMessage("Thumbs"),                        "text":CQ.I18n.getMessage("Switch to thumbs view"),                        "autoHide":true                    }                },{                    "toggleGroup":"cfTab-Browse-TG",                    "enableToggle":true,                    "toggleHandler":function(button, pressed) {                        var tab = CQ.Ext.getCmp("cfTab-Browse");                        if (pressed) {                            tab.dataView.tpl = new CQ.Ext.XTemplate(CQ.wcm.ContentFinderTab.DETAILS_TEMPLATE);                            tab.dataView.itemSelector = CQ.wcm.ContentFinderTab.DETAILS_ITEMSELECTOR;                        }                        if (tab.dataView.store != null) {                            tab.dataView.refresh();                        }                    },                    "pressed":false,                    "allowDepress":false,                    "text":CQ.I18n.getMessage("Details"),                    "tooltip":{                        "title":CQ.I18n.getMessage("Details"),                        "text":CQ.I18n.getMessage("Switch to details view"),                        "autoHide":true                    }                }            ]        },{},{            "autoLoad":false,            "reader": new CQ.Ext.data.JsonReader({                "totalProperty": "results",                "root": "hits",                "fields": [                    "name", "path", "title", "mimeType", "isFolder", "contentType", "ddGroups", "ddNewParagraph", "size", "lastModified", "ck"                ],                "id": "path"            })        })    ]},{    "tabTip": CQ.I18n.getMessage("Paragraphs"),    "id": "cfTab-Paragraphs",    "iconCls": "cq-cft-tab-icon paragraphs",    "xtype": "contentfindertab",    "ranking": 40,    "items": [        CQ.wcm.ContentFinderTab.getQueryBoxConfig({            "id": "cfTab-Paragraphs-QueryBox",            "items": [                CQ.wcm.ContentFinderTab.getSuggestFieldConfig({"url": "/bin/wcm/contentfinder/suggestions.json/content"})            ]        }),        CQ.wcm.ContentFinderTab.getResultsBoxConfig({            "itemsDDGroups": [CQ.wcm.EditBase.DD_GROUP_PARAGRAPH],            "itemsDDNewParagraph": {                "path": "foundation/components/reference",                "propertyName": "./path"            },            "disableContinuousLoading": true,            "items": {                "cls": "cq-cft-dataview cq-cft-paragraphview",                "tpl":                    '<tpl for=".">' +                        '<div class="cq-cft-paragraph">' +                            '<div class="cq-cft-paragraph-ddproxy-wrapper">{excerpt}</div>' +                            '<div class="cq-cft-paragraph-separator"></div>' +                        '</div>' +                    '</tpl>',                "itemSelector":  ".cq-cft-paragraph"            }        },{            "url": "/bin/wcm/foundation/paragraphlist.json"        }, {            "baseParams": {                "type": "cq:Page"            }        })    ]}]};
                var fct = function() {
                    CQ.Util.build("/libs/wcm/core/content/contentfinder.infinity.json", null, null, debug, extensionString);
                };
                window.setTimeout(fct, 1);
            });
</script>  
</apex:page>